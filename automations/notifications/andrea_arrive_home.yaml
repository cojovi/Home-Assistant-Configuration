########Notification when Andrea arrives########
alias: Andrea arrives home
initial_state: True
hide_entity: False
trigger:
  platform: mqtt
  topic: "smartthings/Andrea Door Code/switch"
  payload: "on"
action:
  - service: notify.slack
    data:
      message: "Andrea has arrived home."
  - service:  media_player.turn_on
    entity_id: media_player.living_room_home
  - service:  media_player.volume_set
    entity_id: media_player.living_room_home
    data:
      volume_level: 1      
  - service:  media_player.play_media
    data:
      entity_id: media_player.living_room_home
      media_content_id: !secret andrea_greeting
      media_content_type: audio/mp3
  - service: mqtt.publish
    data:
      topic: "smartthings/Andrea Door Code/switch"
      payload: "off"
